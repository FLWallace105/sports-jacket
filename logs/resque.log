# Logfile created on 2017-11-10 13:54:25 -0800 by logger.rb/56815
I, [2017-11-10T13:54:25.788435 #3881]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T13:54:25.788809 #3881]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
I, [2017-11-10T13:54:26.652539 #3881]  INFO -- : #<HTTParty::Response:0x7fcc400366c8 parsed_response={"errors"=>{"subscription"=>"No update performed, required parameter missing or invalid"}}, @response=#<Net::HTTPBadRequest 400 BAD REQUEST readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 21:54:26 GMT"], "content-type"=>["application/json"], "content-length"=>["89"], "connection"=>["close"], "x-recharge-limit"=>["39/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOexkg.P9eGP130I0gfb2tE-TEs-i5e8Io; Expires=Mon, 11-Dec-2017 21:54:26 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510350866.293-69.178.153.82-224"]}>
E, [2017-11-10T13:54:26.663937 #3881] ERROR -- : (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}]) failed: #<NameError: undefined local variable or method `status' for EllieListener::SubscriptionSwitch:Class>
I, [2017-11-10T13:56:14.537920 #3923]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T13:56:14.538594 #3923]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
I, [2017-11-10T13:56:15.332104 #3923]  INFO -- : #<HTTParty::Response:0x7fb6f00d2b28 parsed_response={"errors"=>{"subscription"=>"No update performed, required parameter missing or invalid"}}, @response=#<Net::HTTPBadRequest 400 BAD REQUEST readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 21:56:15 GMT"], "content-type"=>["application/json"], "content-length"=>["89"], "connection"=>["close"], "x-recharge-limit"=>["39/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOex_w.TCpTtPr34CGWF8E5GaA1ixY5mJ8; Expires=Mon, 11-Dec-2017 21:56:15 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510350974.958-69.178.153.82-224"]}>
E, [2017-11-10T13:56:15.336611 #3923] ERROR -- : (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}]) failed: #<NameError: undefined local variable or method `status' for EllieListener::SubscriptionSwitch:Class>
I, [2017-11-10T14:00:22.985145 #3982]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:00:22.985570 #3982]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
E, [2017-11-10T14:00:22.987407 #3982] ERROR -- : (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}]) failed: #<ArgumentError: :headers must be a hash>
I, [2017-11-10T14:02:36.237734 #4018]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:02:36.238297 #4018]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
E, [2017-11-10T14:02:36.240358 #4018] ERROR -- : (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}]) failed: #<ArgumentError: :headers must be a hash>
I, [2017-11-10T14:05:35.518385 #4074]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:05:35.518922 #4074]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
E, [2017-11-10T14:05:35.520727 #4074] ERROR -- : (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}]) failed: #<ArgumentError: :headers must be a hash>
I, [2017-11-10T14:06:28.236611 #4094]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:06:28.237155 #4094]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
E, [2017-11-10T14:06:28.241195 #4094] ERROR -- : (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}]) failed: #<NoMethodError: undefined method `json' for #<Hash:0x007fcd9a1e3150>>
I, [2017-11-10T14:07:45.998398 #4114]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:07:45.998817 #4114]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
I, [2017-11-10T14:07:46.557016 #4114]  INFO -- : #<HTTParty::Response:0x7fc91896dde8 parsed_response={"errors"=>{"subscription"=>"No update performed, required parameter missing or invalid"}}, @response=#<Net::HTTPBadRequest 400 BAD REQUEST readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 22:07:46 GMT"], "content-type"=>["application/json"], "content-length"=>["89"], "connection"=>["close"], "x-recharge-limit"=>["39/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOe0sg.V7uSPjxxXbR5px1aPotAuZ1wCwc; Expires=Mon, 11-Dec-2017 22:07:46 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510351666.400-69.178.153.82-224"]}>
E, [2017-11-10T14:07:46.561149 #4114] ERROR -- : (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}]) failed: #<NameError: undefined local variable or method `status' for EllieListener::SubscriptionSwitch:Class>
I, [2017-11-10T14:09:49.642674 #4162]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:09:49.643076 #4162]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
I, [2017-11-10T14:09:50.362692 #4162]  INFO -- : #<HTTParty::Response:0x7fcd19902908 parsed_response={"errors"=>{"subscription"=>"No update performed, required parameter missing or invalid"}}, @response=#<Net::HTTPBadRequest 400 BAD REQUEST readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 22:09:50 GMT"], "content-type"=>["application/json"], "content-length"=>["89"], "connection"=>["close"], "x-recharge-limit"=>["39/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOe1Lg.GdSgfuu9ofNI_9EpxDQV-yI1HvQ; Expires=Mon, 11-Dec-2017 22:09:50 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510351790.078-69.178.153.82-224"]}>
I, [2017-11-10T14:09:50.362968 #4162]  INFO -- : We were not able to update the subscription
I, [2017-11-10T14:09:50.363235 #4162]  INFO -- : done: (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}])
I, [2017-11-10T14:14:08.358425 #4217]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:14:08.358990 #4217]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
I, [2017-11-10T14:14:08.915033 #4217]  INFO -- : #<HTTParty::Response:0x7fa957944618 parsed_response="<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\n<title>400 Bad Request</title>\n<h1>Bad Request</h1>\n<p>The browser (or proxy) sent a request that this server could not understand.</p>\n", @response=#<Net::HTTPBadRequest 400 BAD REQUEST readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 22:14:08 GMT"], "content-type"=>["text/html"], "content-length"=>["192"], "connection"=>["close"], "x-recharge-limit"=>["0/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOe2MA.XiVqxIb0lQq8OZ5yTDJxt1iELsY; Expires=Mon, 11-Dec-2017 22:14:08 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510352048.759-69.178.153.82-224"]}>
I, [2017-11-10T14:14:08.915235 #4217]  INFO -- : We were not able to update the subscription
I, [2017-11-10T14:14:08.915476 #4217]  INFO -- : done: (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}])
I, [2017-11-10T14:15:51.343973 #4252]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:15:51.344518 #4252]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
I, [2017-11-10T14:15:52.125163 #4252]  INFO -- : #<HTTParty::Response:0x7fc85018e460 parsed_response={"errors"=>{"subscription"=>"No update performed, required parameter missing or invalid"}}, @response=#<Net::HTTPBadRequest 400 BAD REQUEST readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 22:15:52 GMT"], "content-type"=>["application/json"], "content-length"=>["89"], "connection"=>["close"], "x-recharge-limit"=>["39/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOe2mA.PiVflDzSm5ltbi8tcQZc_9L3Hko; Expires=Mon, 11-Dec-2017 22:15:52 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510352151.743-69.178.153.82-224"]}>
I, [2017-11-10T14:15:52.125396 #4252]  INFO -- : We were not able to update the subscription
I, [2017-11-10T14:15:52.125649 #4252]  INFO -- : done: (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}])
I, [2017-11-10T14:19:13.065457 #4307]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:19:13.066034 #4307]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
I, [2017-11-10T14:19:13.761237 #4307]  INFO -- : #<HTTParty::Response:0x7fa80c0259c0 parsed_response={"errors"=>{"subscription"=>"No update performed, required parameter missing or invalid"}}, @response=#<Net::HTTPBadRequest 400 BAD REQUEST readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 22:19:13 GMT"], "content-type"=>["application/json"], "content-length"=>["89"], "connection"=>["close"], "x-recharge-limit"=>["39/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOe3YQ.ToZYq9yHrsMiRV3Woa-zhRypzQU; Expires=Mon, 11-Dec-2017 22:19:13 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510352353.464-69.178.153.82-224"]}>
I, [2017-11-10T14:19:13.761393 #4307]  INFO -- : We were not able to update the subscription
I, [2017-11-10T14:19:13.761538 #4307]  INFO -- : done: (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}])
I, [2017-11-10T14:21:16.491131 #4336]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:21:16.491470 #4336]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
E, [2017-11-10T14:21:16.493535 #4336] ERROR -- : (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}]) failed: #<ArgumentError: :headers must be a hash>
I, [2017-11-10T14:24:39.134059 #4389]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:24:39.134512 #4389]  INFO -- : new product info for subscription 8672750 is {"alt_sku"=>"722457737550", "alt_title"=>"Alternate Monthly Box", "alt_product_id"=>"10870682450", "alt_variant_id"=>"46480736274"}
I, [2017-11-10T14:24:40.188256 #4389]  INFO -- : #<HTTParty::Response:0x7fcbee005c50 parsed_response={"errors"=>{"subscription"=>"No update performed, required parameter missing or invalid"}}, @response=#<Net::HTTPBadRequest 400 BAD REQUEST readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 22:24:40 GMT"], "content-type"=>["application/json"], "content-length"=>["89"], "connection"=>["close"], "x-recharge-limit"=>["39/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOe4qA.Ng3fZ8B32XGWWRK-jp_jyz_qQ30; Expires=Mon, 11-Dec-2017 22:24:40 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510352679.535-69.178.153.82-224"]}>
I, [2017-11-10T14:24:40.188470 #4389]  INFO -- : We were not able to update the subscription
I, [2017-11-10T14:24:40.188704 #4389]  INFO -- : done: (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}])
I, [2017-11-10T14:30:53.836282 #4493]  INFO -- : We are working on subscription 8672750
I, [2017-11-10T14:30:53.837023 #4493]  INFO -- : new product info for subscription 8672750 is {"sku"=>"722457737550", "product_title"=>"Alternate Monthly Box", "shopify_product_id"=>"10870682450", "shopify_variant_id"=>"46480736274"}
I, [2017-11-10T14:30:57.220608 #4493]  INFO -- : #<HTTParty::Response:0x7fdfb72ce4c8 parsed_response={"subscription"=>{"id"=>8672750, "address_id"=>5894945, "customer_id"=>1956853, "created_at"=>"2017-11-03T17:21:04", "updated_at"=>"2017-11-10 17:30:55", "next_charge_scheduled_at"=>"2017-12-03T00:00:00", "cancelled_at"=>nil, "product_title"=>"Alternate Monthly Box", "variant_title"=>"", "price"=>49.95, "quantity"=>1, "status"=>"ACTIVE", "shopify_product_id"=>10870682450, "shopify_variant_id"=>46480736274, "sku"=>"722457737550", "order_interval_unit"=>"month", "order_interval_frequency"=>"1", "charge_interval_frequency"=>"1", "cancellation_reason"=>nil, "order_day_of_week"=>nil, "order_day_of_month"=>0, "properties"=>[{"name"=>"charge_interval_frequency", "value"=>"1"}, {"name"=>"charge_interval_unit_type", "value"=>"Months"}, {"name"=>"leggings", "value"=>"XL"}, {"name"=>"main-product", "value"=>"true"}, {"name"=>"shipping_interval_frequency", "value"=>"1"}, {"name"=>"shipping_interval_unit_type", "value"=>"Months"}, {"name"=>"sports-bra", "value"=>"XL"}, {"name"=>"tops", "value"=>"XL"}, {"name"=>"wrap", "value"=>"One Size"}], "expire_after_specific_number_of_charges"=>nil}}, @response=#<Net::HTTPOK 200 OK readbody=true>, @headers={"server"=>["nginx/1.10.3"], "date"=>["Fri, 10 Nov 2017 22:30:57 GMT"], "content-type"=>["application/json"], "content-length"=>["1096"], "connection"=>["close"], "x-recharge-limit"=>["39/40"], "p3p"=>["policyref=\"/p3p.xml\", CP=\"DSP COR NID OUR NOR UNI\""], "set-cookie"=>["session=eyJfcGVybWFuZW50Ijp0cnVlfQ.DOe6IQ.UV_I8PYNdTcsgwYb6dHy_-lTKRs; Expires=Mon, 11-Dec-2017 22:30:57 GMT; HttpOnly; Path=/"], "x-request-id"=>["28870-1510353054.314-69.178.153.82-224"]}>
I, [2017-11-10T14:30:57.220829 #4493]  INFO -- : ****** Hooray We have no errors **********
I, [2017-11-10T14:30:57.221157 #4493]  INFO -- : done: (Job{switch_product} | EllieListener::SubscriptionSwitch | [{"action"=>"switch_product", "subscription_id"=>"8672750", "product_id"=>"8204555081", "recharge_change_header"=>{"X-Recharge-Access-Token"=>"998616104d0b4668bcffa0cfde15392e", "Accept"=>"application/json", "Content-Type"=>"application/json"}}])
